(function(){"use strict";var e={3468:function(e,t,s){var n=s(9242),r=s(3396);const o={class:"p-4"};function i(e,t,s,n,i,a){const l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(l)])}var a={data(){return{user:null,flash:null}},mounted(){localStorage.getItem("_user_wsk2019")&&(this.user=JSON.parse(localStorage.getItem("_user_wsk2019")))}},l=s(89);const c=(0,l.Z)(a,[["render",i]]);var u=c,d=s(2483),g=s(7139);const m={class:"home"},h={class:"d-flex align-items-center justify-content-between mb-5"},p=(0,r._)("h1",null,"Event Booking Platform",-1),v=(0,r.Uk)("Login"),f={key:1,class:"d-flex align-items-center"},_={class:"me-3"},w={class:"card-body"},b={class:"mb-3"};function k(e,t,s,o,i,a){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",h,[p,e.$root.user?((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("div",_,(0,g.zw)(e.$root.user.username),1),(0,r._)("a",{href:"#",class:"btn btn-primary",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>a.logout&&a.logout(...e)),["prevent"]))},"Logout")])):((0,r.wg)(),(0,r.j4)(l,{key:0,to:"/login",class:"btn btn-primary login-btn"},{default:(0,r.w5)((()=>[v])),_:1}))]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.events,(e=>((0,r.wg)(),(0,r.j4)(l,{to:`/organizers/${e?.organizer.slug}/events/${e.slug}`,class:"card text-decoration-none text-dark event mb-4",key:e.id},{default:(0,r.w5)((()=>[(0,r._)("div",w,[(0,r._)("h4",b,(0,g.zw)(e.name),1),(0,r._)("div",null,(0,g.zw)(e.organizer?.name)+", "+(0,g.zw)(new Date(e.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})),1)])])),_:2},1032,["to"])))),128))])}var y={name:"HomeView",data(){return{events:[]}},mounted(){fetch("http://192.168.100.155/comp01/02_server/api/v1/events").then((e=>e.json())).then((e=>this.events=e.events))},methods:{logout:function(){fetch(`http://192.168.100.155/comp01/02_server/api/v1/logout?token=${this.$root.user?.token}`,{method:"POST"}).then((e=>e.json())).then((()=>{this.$root.user=null,localStorage.removeItem("_user_wsk2019")}))}}};const z=(0,l.Z)(y,[["render",k]]);var S=z;const D={class:"login"},$=(0,r._)("h1",{class:"mb-5"},"Login",-1),x={class:"row mb-4"},j=(0,r._)("label",{for:"lastname",class:"col-md-3 col-xl-2"},"Lastname",-1),H={class:"col-md-6 col-xl-4"},O={key:0,class:"invalid-feedback"},Y={class:"row mb-4"},L=(0,r._)("label",{for:"registration_code",class:"col-md-3 col-xl-2"},"Registration Code",-1),T={class:"col-md-6 col-xl-4"},U=(0,r._)("div",{class:"row"},[(0,r._)("div",{class:"col-auto col-xl-2 offset-md-3 offset-xl-2"},[(0,r._)("button",{class:"btn btn-primary w-100",id:"login"},"Login")])],-1);function C(e,t,s,o,i,a){const l=(0,r.up)("HelloWorld");return(0,r.wg)(),(0,r.iD)("div",D,[$,(0,r._)("form",{action:"#",onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>a.login&&a.login(...e)),["prevent"]))},[(0,r._)("div",x,[j,(0,r._)("div",H,[(0,r.wy)((0,r._)("input",{type:"text",class:(0,g.C_)(["form-control",{"is-invalid":i.error}]),id:"lastname",name:"lastname","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.lastname=e),placeholder:"Lastname"},null,2),[[n.nr,i.form.lastname]]),i.error?((0,r.wg)(),(0,r.iD)("div",O,(0,g.zw)(i.error),1)):(0,r.kq)("",!0)])]),(0,r._)("div",Y,[L,(0,r._)("div",T,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"registration_code",name:"registration_code","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.registration_code=e),placeholder:"Code"},null,512),[[n.nr,i.form.registration_code]])])]),U],32),(0,r.Wm)(l,{msg:"Welcome to Your Vue.js App"})])}s(7658);var V={name:"LoginView",data(){return{form:{lastname:"",registration_code:""},error:null}},methods:{login:function(){let e;this.error=null,fetch("http://192.168.100.155/comp01/02_server/api/v1/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)}).then((t=>(e=t.ok,t.json()))).then((t=>{e?(this.$root.user=t,localStorage.setItem("_user_wsk2019",JSON.stringify(t)),this.$router.push(this.$route.query.redirect||"/")):this.error="Lastname or registration code not correct"}))}}};const E=(0,l.Z)(V,[["render",C]]);var K=E;const M={class:"home"},P={key:0,class:"text-center"},R={class:"d-flex align-items-center justify-content-between mb-5"},I=(0,r.Uk)("Register for this event"),q={key:0,class:"alert alert-success mb-4"},N={class:"table"},Z=(0,r._)("tr",null,[(0,r._)("td",{colspan:"2"}),(0,r._)("td",null,[(0,r._)("div",{class:"d-flex justify-content-between px-3"},[(0,r._)("div",null,"9:00"),(0,r._)("div",null,"11:00"),(0,r._)("div",null,"15:00"),(0,r._)("div",null,"19:00")])])],-1),W={class:"border border-dark"},J={class:"p-3 channel"},A={class:"border border-dark"},B={class:"border border-dark"};function F(e,t,s,n,o,i){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",M,[o.error?((0,r.wg)(),(0,r.iD)("h1",P,(0,g.zw)(o.error),1)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",R,[(0,r._)("h1",null,(0,g.zw)(o.event.name),1),(0,r.Wm)(a,{to:`/organizers/${s.organizerSlug}/events/${s.eventSlug}/registration`,class:"btn btn-primary",id:"register"},{default:(0,r.w5)((()=>[I])),_:1},8,["to"])]),e.$root.flash?((0,r.wg)(),(0,r.iD)("div",q,(0,g.zw)(e.$root.flash),1)):(0,r.kq)("",!0),(0,r._)("table",N,[Z,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.event.channels,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",W,[(0,r._)("div",J,(0,g.zw)(e.name),1)]),(0,r._)("td",A,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.rooms,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"p-3 room",key:e.id},(0,g.zw)(e.name),1)))),128))]),(0,r._)("td",B,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.rooms,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"p-3 d-flex row m-0",key:e.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.sessions,(e=>((0,r.wg)(),(0,r.j4)(a,{to:`/organizers/${s.organizerSlug}/events/${s.eventSlug}/sessions/${e.id}`,key:e.id,style:(0,g.j5)(e.style),class:(0,g.C_)(["btn session",{registered:i.checkRegistered(e),"btn-outline-success":i.checkRegistered(e),"btn-outline-dark":!i.checkRegistered(e)}])},{default:(0,r.w5)((()=>[(0,r.Uk)((0,g.zw)(e.title),1)])),_:2},1032,["to","style","class"])))),128))])))),128))])])))),128))])],64))])}var G={name:"EventView",props:["organizerSlug","eventSlug"],data(){return{event:{channels:[]},registrations:[],error:!1}},mounted(){let e;fetch(`http://192.168.100.155/comp01/02_server/api/v1/organizers/${this.organizerSlug}/events/${this.eventSlug}`).then((t=>(e=t.ok,t.json()))).then((t=>{e?(this.event=t,this.event.channels.forEach((e=>{e.rooms.forEach((e=>{let t=540;e.sessions.forEach((e=>{let s=60*new Date(e.start).getHours()+new Date(e.start).getMinutes(),n=60*new Date(e.end).getHours()+new Date(e.end).getMinutes();e.style={marginLeft:(s-t)/600*100+"%",width:(n-s)/600*100+"%"},t=n}))}))}))):this.error=t.message})),this.$root.user&&fetch(`http://192.168.100.155/comp01/02_server/api/v1/registrations?token=${this.$root.user?.token}`).then((e=>e.json())).then((e=>this.registrations=e.registrations))},methods:{checkRegistered:function(e){return this.registrations.find((t=>t.event.id===this.event.id&&("talk"===e.type||t.session_ids?.includes(e.id))))}}};const Q=(0,l.Z)(G,[["render",F]]);var X=Q;const ee={class:"home"},te={key:0,class:"text-center"},se={class:"mb-5"},ne=["innerHTML"],re=(0,r._)("td",{class:"pe-3 pb-3"},[(0,r._)("b",null,"Speaker:")],-1),oe={class:"pe-3 pb-3"},ie=(0,r._)("td",{class:"pe-3 pb-3"},[(0,r._)("b",null,"Start:")],-1),ae={class:"pe-3 pb-3"},le=(0,r._)("td",{class:"pe-3 pb-3"},[(0,r._)("b",null,"End:")],-1),ce={class:"pe-3 pb-3"},ue={key:0},de=(0,r._)("td",{class:"pe-3 pb-3"},[(0,r._)("b",null,"Cost:")],-1),ge={class:"pe-3 pb-3"};function me(e,t,s,n,o,i){return(0,r.wg)(),(0,r.iD)("div",ee,[o.error?((0,r.wg)(),(0,r.iD)("h1",te,(0,g.zw)(o.error),1)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("h1",se,(0,g.zw)(o.session.title),1),(0,r._)("p",{innerHTML:o.session.description},null,8,ne),(0,r._)("table",null,[(0,r._)("tr",null,[re,(0,r._)("td",oe,(0,g.zw)(o.session.speaker),1)]),(0,r._)("tr",null,[ie,(0,r._)("td",ae,(0,g.zw)(new Date(o.session.start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})),1)]),(0,r._)("tr",null,[le,(0,r._)("td",ce,(0,g.zw)(new Date(o.session.end).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})),1)]),o.session.cost?((0,r.wg)(),(0,r.iD)("tr",ue,[de,(0,r._)("td",ge,(0,g.zw)(o.session.cost),1)])):(0,r.kq)("",!0)])],64))])}var he={name:"SessionView",props:["organizerSlug","eventSlug","sessionId"],data(){return{session:{},error:null}},mounted(){let e;fetch(`http://192.168.100.155/comp01/02_server/api/v1/organizers/${this.organizerSlug}/events/${this.eventSlug}`).then((t=>(e=t.ok,t.json()))).then((t=>{e?(this.session=t.channels?.map((e=>e.rooms?.map((e=>e.sessions)).flat())).flat().find((e=>e.id==this.sessionId)),this.session||(this.error="Session not found")):this.error=t.message}))}};const pe=(0,l.Z)(he,[["render",me]]);var ve=pe;const fe={class:"home"},_e={key:0,class:"text-center"},we={class:"mb-5"},be={class:"row mb-5"},ke={class:"card-body d-flex align-items-center ticket"},ye=["onUpdate:modelValue","value","disabled"],ze={class:"w-100"},Se={class:"d-flex justify-content-between"},De={class:"h4 me-3"},$e={class:"h4"},xe=(0,r._)("h4",{class:"mb-4"},"Select additional workshops you want to book:",-1),je={key:0,class:"d-block mb-3 workshop"},He=["value"],Oe={class:"row justify-content-end"},Ye={class:"col-auto"},Le={class:"mb-4"},Te=(0,r._)("td",{class:"p-3"},"Event ticket:",-1),Ue={class:"p-3",id:"event-cost"},Ce={class:"border-bottom"},Ve=(0,r._)("td",{class:"p-3"},"Additional workshops:",-1),Ee={class:"p-3",id:"additional-cost"},Ke={class:"fw-bold"},Me=(0,r._)("td",{class:"p-3"},"Total:",-1),Pe={class:"p-3",id:"total-cost"},Re={key:0,class:"text-danger mb-3"},Ie={class:"d-flex justify-content-end"},qe=["disabled"];function Ne(e,t,s,o,i,a){return(0,r.wg)(),(0,r.iD)("div",fe,[i.error404?((0,r.wg)(),(0,r.iD)("h1",_e,(0,g.zw)(i.error404),1)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("h1",we,(0,g.zw)(i.event.name),1),(0,r._)("form",{action:"#",onSubmit:t[1]||(t[1]=(0,n.iM)(((...e)=>a.register&&a.register(...e)),["prevent"]))},[(0,r._)("div",be,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.event.tickets,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"col-sm-4",key:e.id},[(0,r._)("div",{class:(0,g.C_)(["card h-100",{disabled:!e.available}])},[(0,r._)("label",ke,[(0,r.wy)((0,r._)("input",{type:"radio","onUpdate:modelValue":e=>i.form.ticket=e,class:"me-3",value:e,disabled:!e.available},null,8,ye),[[n.G2,i.form.ticket]]),(0,r._)("div",ze,[(0,r._)("div",Se,[(0,r._)("span",De,(0,g.zw)(e.name),1),(0,r._)("span",$e,(0,g.zw)(e.cost),1)]),(0,r._)("div",null,(0,g.zw)(e.available?e.description:"unavailable"),1)])])],2)])))),128))]),xe,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.event.channels,(e=>((0,r.wg)(),(0,r.iD)(r.HY,{key:e.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.rooms,(e=>((0,r.wg)(),(0,r.iD)(r.HY,{key:e.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.sessions,(e=>((0,r.wg)(),(0,r.iD)(r.HY,{key:e.id},["workshop"===e.type?((0,r.wg)(),(0,r.iD)("label",je,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.sessions=e),value:e},null,8,He),[[n.e8,i.form.sessions]]),(0,r.Uk)(" "+(0,g.zw)(e.title),1)])):(0,r.kq)("",!0)],64)))),128))],64)))),128))],64)))),128)),(0,r._)("div",Oe,[(0,r._)("div",Ye,[(0,r._)("table",Le,[(0,r._)("tr",null,[Te,(0,r._)("td",Ue,(0,g.zw)(i.form.ticket?.cost||"-"),1)]),(0,r._)("tr",Ce,[Ve,(0,r._)("td",Ee,(0,g.zw)(i.form.sessions.map((e=>e.cost)).reduce(((e,t)=>e+Number(t)),0)),1)]),(0,r._)("tr",Ke,[Me,(0,r._)("td",Pe,(0,g.zw)(i.form.ticket?.cost+i.form.sessions.map((e=>Number(e.cost))).reduce(((e,t)=>e+t),0)||0),1)])]),i.error?((0,r.wg)(),(0,r.iD)("div",Re,(0,g.zw)(i.error),1)):(0,r.kq)("",!0),(0,r._)("div",Ie,[(0,r._)("button",{class:"btn btn-primary",id:"purchase",disabled:!i.form.ticket},"Purchase",8,qe)])])])],32)],64))])}var Ze={name:"EventRegisterView",props:["organizerSlug","eventSlug"],data(){return{form:{ticket:null,sessions:[]},event:{tickets:[],channels:[]},error:null,error404:null}},mounted(){let e;this.$root.user||this.$router.push(`/login?redirect=${this.$route.path}`),fetch(`http://192.168.100.155/comp01/02_server/api/v1/organizers/${this.organizerSlug}/events/${this.eventSlug}`).then((t=>(e=t.ok,t.json()))).then((t=>{e?this.event=t:this.error404=t.message}))},methods:{register:function(){let e;this.error=null,fetch(`http://192.168.100.155/comp01/02_server/api/v1/organizers/${this.organizerSlug}/events/${this.eventSlug}/registration?token=${this.$root.user?.token}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.form.ticket.id,session_ids:this.form.sessions.map((e=>e.id))})}).then((t=>(e=t.ok,t.json()))).then((t=>{e?(this.$root.flash="Registration successful",this.$router.push(`/organizers/${this.organizerSlug}/events/${this.eventSlug}`)):this.error=t.message}))}}};const We=(0,l.Z)(Ze,[["render",Ne]]);var Je=We;const Ae=[{path:"/",name:"home",component:S},{path:"/login",name:"login",component:K},{path:"/organizers/:organizerSlug/events/:eventSlug",name:"event",props:!0,component:X},{path:"/organizers/:organizerSlug/events/:eventSlug/sessions/:sessionId",name:"session",props:!0,component:ve},{path:"/organizers/:organizerSlug/events/:eventSlug/registration",name:"event-registration",props:!0,component:Je}],Be=(0,d.p7)({history:(0,d.PO)("/comp01/01_spa/"),routes:Ae});var Fe=Be;(0,n.ri)(u).use(Fe).mount("#app")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var a=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every((function(e){return s.O[e](n[l])}))?n.splice(l--,1):(a=!1,o<i&&(i=o));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],a=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(l)var u=l(s)}for(t&&t(n);c<i.length;c++)o=i[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},n=self["webpackChunk_01_spa"]=self["webpackChunk_01_spa"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(3468)}));n=s.O(n)})();
//# sourceMappingURL=app.34201737.js.map